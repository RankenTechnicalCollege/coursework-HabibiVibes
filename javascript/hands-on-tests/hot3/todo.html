<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo App Challenge</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" 
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="col-md-6">

        <h2 class="text-center mb-4">Todo App Challenge</h2>

        <div class="card p-4 shadow">

            <!-- Input for new todo item -->
            <div class="input-group mb-3">
                <input
                    id="taskInput"
                    type="text"
                    class="form-control"
                    placeholder="Enter a new task"
                >
                <button
                    id="addBtn"
                    class="btn btn-primary"
                >
                    Add Task
                </button>
            </div>

            <!-- Message area -->
            <p id="message" class="fw-bold"></p>

            <!-- Todo list -->
            <ul id="taskList" class="list-group"></ul>

        </div>
    </div>
</div>

<script>
    // Select DOM elements
    const taskInput = document.getElementById('taskInput');
    const addBtn = document.getElementById('addBtn');
    const taskList = document.getElementById('taskList');
    const message = document.getElementById('message');

    // Pre defined tasks
    let tasks = [
        "Finish renovating the spare bathroom before thanksgiving so the wife is happy",
        "Finish JavaScript Hands-on Tests before the weekend",
        "Email Professor Kauffmann 1000 times with questions that I can figure out on my own",
        "Finish writing my resume for BUS1000 course before tomorrow",
        "Take Romina out to dinner tonight to celebrate her 29th birthday"
    ];

    // Function to render tasks to the screen
    function renderTasks() {
        taskList.innerHTML = ""; // Clear current task list 
        tasks.forEach((task, index) => {
            const li = document.createElement(`li`);
            li.className = "list-group-item d-flex justify-content-between align-items-center";

            li.innerHTML = `
                ${task}
                <button class="btn btn-danger btn-sm" onclick="removeTask(${index})">Remove</button>
            `;

            taskList.appendChild(li);
        });
    }

    // Function to remove a task by index
    function removeTask(index) {
        tasks.splice(index, 1);
        renderTasks();
    }

    // Event listener for adding a new task - with .trim()
    addBtn.addEventListener("click", () => {
        const newTask = taskInput.value.trim();

        // Clear previous message
        message.textContent = "";
        message.classList.remove("text-danger");

        if (newTask === "") {
            message.textContent = "Please enter a valid task.";
            message.classList.add("text-danger");
            return;
        }

        // Add new task and re-render
        tasks.push(newTask);
        taskInput.value = "";
        renderTasks();
    });

    // Initial render of tasks
    renderTasks();
</script>
</body>
    

<footer class="text-center mt-4 mb-2">
    <small class="text-muted">Hopefully I don't actually send 1000 emails to Professor Kauffmann</small>
</footer>
</body>
</html>